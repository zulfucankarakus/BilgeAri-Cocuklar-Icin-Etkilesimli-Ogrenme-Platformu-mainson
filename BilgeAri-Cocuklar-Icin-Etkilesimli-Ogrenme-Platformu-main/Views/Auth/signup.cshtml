@model BilgeAriMVC.Models.SignupViewModel
@{
    ViewData["Title"] = "KayÄ±t Ol";
    Layout = "_Layout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/signup.css" asp-append-version="true" />
}

<div class="signup-page">

    <div class="header">
        <h1>ğŸ BeeLearn</h1>
        <p>AramÄ±za katÄ±lmak iÃ§in hemen kayÄ±t ol!</p>
    </div>

    <div class="login-container">
        <div class="login-box">

            <h2>KayÄ±t Ol</h2>

            <form id="signupForm" asp-controller="Auth" asp-action="Signup" method="post">
                @Html.AntiForgeryToken()

                <label>Ad Soyad</label>
                <input type="text" asp-for="Name" id="name" placeholder="AdÄ±nÄ± gir" required>
                <span asp-validation-for="Name" class="text-danger"></span>

                <label>E-posta</label>
                <input type="email" asp-for="Email" id="email" placeholder="E-posta gir" required>
                <span asp-validation-for="Email" class="text-danger"></span>

                <label>Åifre</label>
                <input type="password" asp-for="Password" id="password" placeholder="Åifre gir" required>
                <span asp-validation-for="Password" class="text-danger"></span>

                <p style="font-size:13px;color:#5d4037;">
                    Åifre â‰¥6 karakter, bÃ¼yÃ¼k-kÃ¼Ã§Ã¼k harf, sayÄ± ve Ã¶zel karakter iÃ§ermelidir.
                </p>

                <button type="submit" id="registerBtn">KayÄ±t Ol</button>

                <p id="registerMessage"></p>

                <div class="links">
                    <a asp-controller="Auth" asp-action="Login">Zaten hesabÄ±m var</a>
                </div>

            </form>

        </div>
    </div>

</div>

@section Scripts {
    <script>
        document.getElementById('signupForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const messageEl = document.getElementById('registerMessage');
            const formData = new FormData(this);
            
            try {
                const response = await fetch(this.action, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                messageEl.textContent = result.message;
                messageEl.style.color = result.success ? 'green' : 'red';
                
                if (result.success) {
                    setTimeout(() => {
                        window.location.href = '@Url.Action("Index", "Home")';
                    }, 1000);
                }
            } catch (error) {
                messageEl.textContent = 'Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.';
                messageEl.style.color = 'red';
            }
        });
    </script>
}
